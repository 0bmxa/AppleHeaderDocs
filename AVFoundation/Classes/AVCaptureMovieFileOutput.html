<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>AVCaptureMovieFileOutput Class Reference</title>

	<link rel="stylesheet" href="../css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1334)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title">
				<a href="../index.html">MacOSX 10.13 AVFoundation Framework </a>
			</h1>

			<p id="developer-home">
				<a href="../index.html">Apple Inc.</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="../index.html">Index</a></li>
<li><a href="../hierarchy.html">Hierarchy</a></li>

					<li id="on-this-page" role="navigation">
						<label>
							On This Page

							<div class="chevron">
								<div class="chevy chevron-left"></div>
								<div class="chevy chevron-right"></div>
							</div>

							<select id="jump-to">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	

	
	
	<option value="tasks">Tasks</option>
	
	

	
	
	<optgroup label="Properties">
		
		<option value="//api/name/_0">_0</option>
		
		<option value="//api/name/metadata">metadata</option>
		
		<option value="//api/name/movieFragmentInterval">movieFragmentInterval</option>
		
	</optgroup>
	

	
	<optgroup label="Class Methods">
		
		<option value="//api/name/new">+ new</option>
		
	</optgroup>
	

	
	<optgroup label="Instance Methods">
		
		<option value="//api/name/init">- init</option>
		
		<option value="//api/name/outputSettingsForConnection:">- outputSettingsForConnection:</option>
		
		<option value="//api/name/recordsVideoOrientationAndMirroringChangesAsMetadataTrackForConnection:">- recordsVideoOrientationAndMirroringChangesAsMetadataTrackForConnection:</option>
		
		<option value="//api/name/setOutputSettings:forConnection:">- setOutputSettings:forConnection:</option>
		
		<option value="//api/name/setRecordsVideoOrientationAndMirroringChanges:asMetadataTrackForConnection:">- setRecordsVideoOrientationAndMirroringChanges:asMetadataTrackForConnection:</option>
		
	</optgroup>
	
	
</select>
						</label>
					</li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview_contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">AVCaptureMovieFileOutput Class Reference</h1>

					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<th>Inherits from</th>
	<td><a href="../Classes/AVCaptureFileOutput.html">AVCaptureFileOutput</a> : <a href="../Classes/AVCaptureOutput.html">AVCaptureOutput</a> : NSObject</td>
</tr><tr>
	<th>Declared in</th>
	<td>AVCaptureFileOutput.h</td>
</tr>
						</tbody></table></div>
					

                    
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>@class AVCaptureMovieFileOutput
@abstract
    AVCaptureMovieFileOutput is a concrete subclass of <a href="../Classes/AVCaptureFileOutput.html">AVCaptureFileOutput</a> that writes captured media to QuickTime movie files.</p>

<p>@discussion
    AVCaptureMovieFileOutput implements the complete file recording interface declared by <a href="../Classes/AVCaptureFileOutput.html">AVCaptureFileOutput</a> for writing media data to QuickTime movie files. In addition, instances of AVCaptureMovieFileOutput allow clients to configure options specific to the QuickTime file format, including allowing them to write <a href="#//api/name/metadata">metadata</a> collections to each file, specify media encoding options for each track (Mac OS X), and specify an interval at which movie fragments should be written.</p>
					</div>
					
					

					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						

						
						

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/init" title="init"></a>
	<h3 class="method-title"><code><a href="#//api/name/init">&ndash;&nbsp;init</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			

			<div class="method-subsection method-declaration"><code>- (instancetype)init</code></div>

		    
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/new" title="new"></a>
	<h3 class="method-title"><code><a href="#//api/name/new">+&nbsp;new</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			

			<div class="method-subsection method-declaration"><code>+ (instancetype)new</code></div>

		    
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/movieFragmentInterval" title="movieFragmentInterval"></a>
	<h3 class="method-title"><code><a href="#//api/name/movieFragmentInterval">&nbsp;&nbsp;movieFragmentInterval</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>@property movieFragmentInterval
@abstract
    Specifies the frequency with which movie fragments should be written.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic) CMTime movieFragmentInterval</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>@property movieFragmentInterval
@abstract
    Specifies the frequency with which movie fragments should be written.</p>

<p>@discussion
    When movie fragments are used, a partially written QuickTime movie file whose writing is unexpectedly interrupted can be successfully opened and played up to multiples of the specified time interval. A value of kCMTimeInvalid indicates that movie fragments should not be used, but that only a movie atom describing all of the media in the file should be written. The default value of this property is ten seconds.</p>

<pre><code>Changing the value of this property will not affect the movie fragment interval of the file currently being written, if there is one.
</code></pre>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">AVCaptureFileOutput.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/metadata" title="metadata"></a>
	<h3 class="method-title"><code><a href="#//api/name/metadata">&nbsp;&nbsp;metadata</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>@property metadata
@abstract
    A collection of metadata to be written to the receiver&rsquo;s output files.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, copy, nullable) NSArray&lt;AVMetadataItem*&gt; *metadata</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>@property metadata
@abstract
    A collection of metadata to be written to the receiver&rsquo;s output files.</p>

<p>@discussion
    The value of this property is an array of <a href="../Classes/AVMetadataItem.html">AVMetadataItem</a> objects representing the collection of top-level metadata to be written in each output file.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">AVCaptureFileOutput.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/_0" title="_0"></a>
	<h3 class="method-title"><code><a href="#//api/name/_0">&nbsp;&nbsp;_0</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>@property availableVideoCodecTypes
@abstract
    Indicates the supported video codec formats that can be specified in setOutputSettingsForConnection:.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, readonly) NSArray&lt;AVVideoCodecType&gt; *NS_AVAILABLE_IOS ( 10 _0</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>@property availableVideoCodecTypes
@abstract
    Indicates the supported video codec formats that can be specified in setOutputSettingsForConnection:.</p>

<p>@discussion
    The value of this property is an NSArray of AVVideoCodecTypes that can be used as values for the AVVideoCodecKey in the receiver&rsquo;s setOutputSettingsForConnection: dictionary. The array of available video codecs may change depending on the current session preset. The first codec in the array is used by default when recording a file.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">AVCaptureFileOutput.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/outputSettingsForConnection:" title="outputSettingsForConnection:"></a>
	<h3 class="method-title"><code><a href="#//api/name/outputSettingsForConnection:">&ndash;&nbsp;outputSettingsForConnection:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>@method outputSettingsForConnection:
@abstract
    Returns the options the receiver uses to encode media from the given connection as it is being recorded.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (NSDictionary&lt;NSString*,id&gt; *)outputSettingsForConnection:(AVCaptureConnection *)<em>connection</em></code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>@method outputSettingsForConnection:
@abstract
    Returns the options the receiver uses to encode media from the given connection as it is being recorded.</p>

<p>@param connection
    The connection delivering the media to be encoded.
@result
    An NSDictionary of output settings.</p>

<p>@discussion
    See AVAudioSettings.h for audio connections or AVVideoSettings.h for video connections for more information on the structure of an output settings dictionary. If the returned value is an empty dictionary (i.e. [NSDictionary dictionary], the format of the media from the connection will not be changed before being written to the file. If <a href="#//api/name/setOutputSettings:forConnection:">setOutputSettings:forConnection:</a> was called with a nil dictionary, this method returns a non-nil dictionary reflecting the settings used by the AVCaptureSession&rsquo;s current sessionPreset.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">AVCaptureFileOutput.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/setOutputSettings:forConnection:" title="setOutputSettings:forConnection:"></a>
	<h3 class="method-title"><code><a href="#//api/name/setOutputSettings:forConnection:">&ndash;&nbsp;setOutputSettings:forConnection:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>@method setOutputSettings:forConnection:
@abstract
    Sets the options the receiver uses to encode media from the given connection as it is being recorded.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)setOutputSettings:(nullable NSDictionary&lt;NSString*,id&gt; *)<em>outputSettings</em> forConnection:(AVCaptureConnection *)<em>connection</em></code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>@method setOutputSettings:forConnection:
@abstract
    Sets the options the receiver uses to encode media from the given connection as it is being recorded.</p>

<p>@param outputSettings
    An NSDictionary of output settings.
@param connection
    The connection delivering the media to be encoded.</p>

<p>@discussion
    See AVAudioSettings.h for audio connections or AVVideoSettings.h for video connections for more information on how to construct an output settings dictionary. A value of an empty dictionary (i.e. [NSDictionary dictionary], means that the format of the media from the connection should not be changed before being written to the file. A value of nil means that the output format will be determined by the session preset. In this case, <a href="#//api/name/outputSettingsForConnection:">outputSettingsForConnection:</a> will return a non-nil dictionary reflecting the settings used by the AVCaptureSession&rsquo;s current sessionPreset.</p>

<pre><code>On iOS, you may only specify the AVVideoCodecKey in the outputSettings. If you specify any other key, an NSInvalidArgumentException will be thrown. See the availableVideoCodecTypes property.
</code></pre>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">AVCaptureFileOutput.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/recordsVideoOrientationAndMirroringChangesAsMetadataTrackForConnection:" title="recordsVideoOrientationAndMirroringChangesAsMetadataTrackForConnection:"></a>
	<h3 class="method-title"><code><a href="#//api/name/recordsVideoOrientationAndMirroringChangesAsMetadataTrackForConnection:">&ndash;&nbsp;recordsVideoOrientationAndMirroringChangesAsMetadataTrackForConnection:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>@method recordsVideoOrientationAndMirroringChangesAsMetadataTrackForConnection:
@abstract
    Returns YES if the movie file output will create a timed <a href="#//api/name/metadata">metadata</a> track that records samples which reflect changes made to the given connection&rsquo;s videoOrientation and videoMirrored properties during recording.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)recordsVideoOrientationAndMirroringChangesAsMetadataTrackForConnection:(AVCaptureConnection *)<em>connection</em></code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>@method recordsVideoOrientationAndMirroringChangesAsMetadataTrackForConnection:
@abstract
    Returns YES if the movie file output will create a timed <a href="#//api/name/metadata">metadata</a> track that records samples which reflect changes made to the given connection&rsquo;s videoOrientation and videoMirrored properties during recording.</p>

<p>@param connection
    A connection delivering video media to the movie file output. This method throws an NSInvalidArgumentException if the connection does not have a mediaType of AVMediaTypeVideo or if the connection does not terminate at the movie file output.</p>

<p>@discussion
    See <a href="#//api/name/setRecordsVideoOrientationAndMirroringChanges:asMetadataTrackForConnection:">setRecordsVideoOrientationAndMirroringChanges:asMetadataTrackForConnection:</a> for details on the behavior controlled by this value. The default value returned is NO.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">AVCaptureFileOutput.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/setRecordsVideoOrientationAndMirroringChanges:asMetadataTrackForConnection:" title="setRecordsVideoOrientationAndMirroringChanges:asMetadataTrackForConnection:"></a>
	<h3 class="method-title"><code><a href="#//api/name/setRecordsVideoOrientationAndMirroringChanges:asMetadataTrackForConnection:">&ndash;&nbsp;setRecordsVideoOrientationAndMirroringChanges:asMetadataTrackForConnection:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>@method setRecordsVideoOrientationAndMirroringChanges:asMetadataTrackForConnection:
@abstract
    Controls whether or not the movie file output will create a timed <a href="#//api/name/metadata">metadata</a> track that records samples which reflect changes made to the given connection&rsquo;s videoOrientation and videoMirrored properties during recording.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)setRecordsVideoOrientationAndMirroringChanges:(BOOL)<em>doRecordChanges</em> asMetadataTrackForConnection:(AVCaptureConnection *)<em>connection</em></code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>@method setRecordsVideoOrientationAndMirroringChanges:asMetadataTrackForConnection:
@abstract
    Controls whether or not the movie file output will create a timed <a href="#//api/name/metadata">metadata</a> track that records samples which reflect changes made to the given connection&rsquo;s videoOrientation and videoMirrored properties during recording.</p>

<p>@param doRecordChanges
    If YES, the movie file output will create a timed <a href="#//api/name/metadata">metadata</a> track that records samples which reflect changes made to the given connection&rsquo;s videoOrientation and videoMirrored properties during recording.
@param connection
    A connection delivering video media to the movie file output. This method throws an NSInvalidArgumentException if the connection does not have a mediaType of AVMediaTypeVideo or if the connection does not terminate at the movie file output.</p>

<p>@discussion
    When a recording is started the current state of a video capture connection&rsquo;s videoOrientation and videoMirrored properties are used to build the display matrix for the created video track. The movie file format allows only one display matrix per track, which means that any changes made during a recording to the videoOrientation and videoMirrored properties are not captured. For example, a user starts a recording with their device in the portrait orientation, and then partway through the recording changes the device to a landscape orientation. The landscape orientation requires a different display matrix, but only the initial display matrix (the portrait display matrix) is recorded for the video track.</p>

<pre><code>By invoking this method the client application directs the movie file output to create an additional track in the captured movie. This track is a timed metadata track that is associated with the video track, and contains one or more samples that contain a Video Orientation value (as defined by EXIF and TIFF specifications, which is enumerated by CGImagePropertyOrientation in &lt;ImageIO/CGImageProperties.h&gt;). The value represents the display matrix corresponding to the AVCaptureConnection's videoOrientation and videoMirrored properties when applied to the input source. The initial sample written to the timed metadata track represents video track's display matrix. During recording additional samples will be written to the timed metadata track whenever the client application changes the video connection's videoOrienation or videoMirrored properties. Using the above example, when the client application detects the user changing the device from portrait to landscape orientation, it updates the video connection's videoOrientation property, thus causing the movie file output to add a new sample to the timed metadata track.

After capture, playback and editing applications can use the timed metadata track to enhance their user's experience. For example, when playing back the captured movie, a playback engine can use the samples to adjust the display of the video samples to keep the video properly oriented. Another example is an editing application that uses the sample the sample times to suggest cut points for breaking the captured movie into separate clips, where each clip is properly oriented.

The default behavior is to not create the timed metadata track.

The doRecordChanges value is only observed at the start of recording. Changes to the value will not have any effect until the next recording is started.
</code></pre>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">AVCaptureFileOutput.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						
					</div>
					
					

                    
                    
          
				</main>

				<footer>
					<div class="footer-copyright">
						
						<p class="copyright">Copyright &copy; 2018 Apple Inc. All rights reserved. Updated: 2018-03-06</p>
						
						
						<p class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (build 1334)</a>.</p>
						
					</div>
				</footer>
			</div>
		</div>
	</article>

	<script src="../js/script.js"></script>
</body>
</html>